<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>soui的xml设计器</title>
</head>
<body>
<div id="wmd-preview" class="wmd-preview"><div class="md-section-divider"></div><div class="md-section-divider"></div><h1 data-anchor-id="gz2u" id="soui的xml设计器">soui的xml设计器</h1><p data-anchor-id="dq91">首先上2个图，如果大家觉得还可以，继续看下去，觉得是垃圾的话那就关闭这个页面吧。<strong>本工具的定位在于前期快速拖拉出一个大致能看的过去<a href="http://www.cnblogs.com/setoutsoft/" target="_blank">soui</a>界面初稿（没错，就是初稿），把逻辑功能先实现了再说，后期再微调皮肤和样式，bingo~</strong></p><div class="md-section-divider"></div><h3 data-anchor-id="oxtn" id="mockups手绘的界面这个几分钟就能拖拉出来">mockups手绘的界面（这个几分钟就能拖拉出来）</h3><p data-anchor-id="xk7r"><img src="http://i1.tietuku.com/6cf40e3989540ff5.png"></p><div class="md-section-divider"></div><h3 data-anchor-id="g1pb" id="生成soui的xml文件效果">生成soui的xml文件效果</h3><p data-anchor-id="3qna"><img src="http://i1.tietuku.com/d68f2646293eedc2.png"></p><div class="md-section-divider"></div><h1 data-anchor-id="9wi9" id="一-开场吐槽">一 开场吐槽</h1><p data-anchor-id="4vkp"><a href="http://www.cnblogs.com/setoutsoft/" target="_blank">soui</a>是一个非常不错的DUI库，感谢作者的辛苦劳动。但是但是懒惰的程序员们习惯了拖拉界面的日子，让我们完全手写xml文件实在是太痛苦了些，奈何soui还没有一个成品的设计器（半成品的都木有），看着MFC、Qt、Android、Windows Form、WebUI这些开发工具，随便拖拉几下就可以快速做出一个大致的界面来，实在是口水不止~~~那该怎么办呢？我总结了大概这么几种方法：</p><ol data-anchor-id="k65s">
<li>独立开发一个soui设计器（没这能力、也没这时间，看看duilib的那个设计器就知道了，没事就给你弄个崩溃，喊冤都没地方哭去~）</li>
<li>改换门庭，转投它家（开玩笑，千挑万选才相中soui，嘿嘿） </li>
<li><strong>借用其他工具或语言的设计器，通过某种技术手段生成soui的xml文件（这个思路我认为还是比较可行的，开源时代最反对“重复造轮子”嘛）</strong></li>
</ol><p data-anchor-id="9013">注：soui的一些demo例子，非常的炫（传送门：<a href="http://www.cnblogs.com/setoutsoft/p/4155997.html" target="_blank">http://www.cnblogs.com/setoutsoft/p/4155997.html</a>）</p><div class="md-section-divider"></div><h1 data-anchor-id="r71y" id="二-soui的xml文件说明">二 SOUI的xml文件说明</h1><p data-anchor-id="8w1a">如果去掉xml文件中关于样式和皮肤的部分，所有的窗口和控件都可以看作一个是方框，好看的界面都是在方框上贴图贴出来的效果。设计器（或者说soui的xml文件）最关心的是窗口或控件的<strong>位置、大小以及其他的一些基本属性</strong>。像<strong><em>皮肤、样式、字体</em></strong>等都可以后期再进行微调和美化！！！</p><div class="md-section-divider"></div><h1 data-anchor-id="cti8" id="三设计器选择">三、设计器选择</h1><p data-anchor-id="oa15">考察过的设计器大致有这么几个：VC对话框设计器、Qt设计器、Android的UI设计器、WebUI设计器、UI原型设计软件</p><div class="md-section-divider"></div><h2 data-anchor-id="syhe" id="31-vc的对话框设计器">3.1 VC的对话框设计器</h2><p data-anchor-id="ka4j">生成的是一个rc文件，文件内容和格式看着挺简单，实际解析起来挺费劲，微软也不给开放一个接口或者库啥的。</p><div class="md-section-divider"></div><h2 data-anchor-id="7duq" id="32-qt设计器">3.2 Qt设计器</h2><p data-anchor-id="dlal">Qt官网下载地址：<a href="http://www.qt.io/download-open-source/#section-2" target="_blank">http://www.qt.io/download-open-source/#section-2</a> <br>
Qt设计器设计的界面保存为*.ui格式，ui文件实质就是一个xml格式文件，如下所示是一个ui文件的片段。理论上而言，只要有一个好的xml解析库，转换成soui的xml文件应该是可行的，但是本人对xml格式无爱，感觉xml太罗嗦太繁琐了，也不够时髦（我更喜欢用json，嘿嘿）。另外你得安装一套Qt开发环境，才能用这个Designer工具。 <br>
<strong>注：这种转换就可以用那些文本处理能力更强的语言来做，比如php、python等</strong> <br>
<img src="http://i1.tietuku.com/5f0fa9c91fb04e06.png"></p><div class="md-section-divider"></div><h2 data-anchor-id="6h7h" id="33-android的ui设计器">3.3 Android的UI设计器</h2><p data-anchor-id="lza3">曾经有段时间也对Android开发有过兴趣，Android SDK自带的设计器确实强大，做一个简单界面分分秒秒的事，做复杂界面也不难。但是但是，做Android开发有3大难关要过：</p><ol data-anchor-id="1jzh">
<li>Android SDK安装困难，要翻越伟大的GFW（貌似现在国内有Android SDK镜像了）；</li>
<li>机器配置要求高，要不你连eclipse都运行不起来；</li>
<li>还得安装一个Android模拟器（真机android开发？我只能祝你好运了）</li>
</ol><div class="md-section-divider"></div><h2 data-anchor-id="lc36" id="34-webui设计器">3.4 WebUI设计器</h2><p data-anchor-id="tyr2">现在的web技术太强大了，每每看到那些简洁、素雅、酷炫的网页都口水不止，有时候就想html标签不就是soui里的控件吗，css不就是soui的控件属性和样式，把这些解析出来难度不大吧。查阅资料后才知道初生牛犊不怕虎是神马意思。主要技术难点：</p><ol data-anchor-id="xlmf">
<li>html+css解析google、微软、苹果等这些牛叉公司也不敢说一点问题都没有，兼容性问题分分钟钟搞死你；</li>
<li>web页面有2种设计方式，一种是纯前端设计，即利用html+css+javascript实现（这种方法要求前端技术非常熟悉才行）；另一种就是利用ps等平面设计软件进行设计，然后切图再配合div+css做出web页面（工科男一个，实在是没有学ps的天份），so放弃~~</li>
</ol><div class="md-section-divider"></div><h2 data-anchor-id="y9on" id="35-ui原型设计软件">3.5 UI原型设计软件</h2><p data-anchor-id="mc3k">在正规的软件开发公司，软件设计的前期要快速开发出一套原型，供开发人员和客户之间协商沟通和讨论。那么原型到底长什么样呢？用什么画？白纸、笔和大脑？ <br>
然而用户的需求是苛刻的，用户的需求很多时候是互相矛盾不合理的，用户有时候都不知道他们到底想要什么，于是乎一大批UI原型设计软件纷纷出世，替代传统的白纸+手工绘制方法。目前原型设计软件按照用途主要分为3类：Web UI原型设计、手机APP原型设计、软件UI原型设计。这些软件大多都可以导出成png、pdf、html等格式，供开发人员和用户交流讨论。 <br>
这些软件的最终目的不是为了画出一个漂亮的UI，而是通过类似<strong><em>涂鸦、素描、手绘风格</em></strong>的简单线条和方框快速勾勒出一个原型出来，与用户进行交流和反复修改。考察过的UI原型设计软件有3个：</p><ol data-anchor-id="v5k8">
<li><strong>AxureRP</strong>（主流原型设计软件，据说很多大公司在使用，可以免费试用30天） <br>
<img src="http://i1.tietuku.com/46bc6171cc1fb8a6.png"> <br>
可以生成html网页，html源码相对来说不太复杂，但解析也不太容易。 <br>
<img src="http://i1.tietuku.com/2d7837083292c767.png"> <br>
<img src="http://i1.tietuku.com/f261340b119aee85.png"></li>
<li><strong>Balsamiq Mockups</strong>（基于Adobe Air + Flex技术开发，手绘风格的界面比较不错，也是收费的，可以免费试用30天）； <br>
<img src="http://i1.tietuku.com/6a99f77c8f0272e8.png"> <br>
mockups有个我非常喜欢的功能，它可以将原型界面的信息导出成<strong>json</strong>格式，然后我们就可以利用json数据解析得到soui的xml文件</li>
<li><strong>Pencil Project</strong>（开源的UI原型设计软件，可惜从2013年开始就不更新了，功能也基本够用，但和主流的UI原型设计软件差距较大） <br>
<img src="http://i1.tietuku.com/6a0a31d81dc8c8f1.png"> <br>
也是可以导出一个html格式的布局文件，理论上解析该文件也可以得到soui的xml文件，但难度不小，该软件自带的控件种类较少，界面效果也太丑，嘿嘿。 <br>
<img src="http://i1.tietuku.com/2a6795a9aee1a5ef.png"> <br>
<img src="http://i1.tietuku.com/cfff1650d2d1ea88.png"></li>
</ol><div class="md-section-divider"></div><h1 data-anchor-id="hugq" id="四-利用mockups生成soui的xml文件">四 利用mockups生成soui的xml文件</h1><div class="md-section-divider"></div><h2 data-anchor-id="qulw" id="41-思路">4.1 思路</h2><p data-anchor-id="p0ok"><strong>废话就不多说了，我的主要思路是：用mockups手绘界面，然后导出json格式的数据，通过本文的soui.php脚本，将json数据解析成soui需要的xml文件。</strong> <br>
有这么几点要说明：</p><ol data-anchor-id="nk9l">
<li>mockups是收费软件，但可以免费试用30天，功能没有阉割；</li>
<li>解析json的方法很多，有很多的库，很多的编程语言可选，我选择的是PHP（语法简单，看懂代码应该没有问题，半天时间就可以上手写代码了，边写边查资料毫无压力）；</li>
<li>生成的xml文件没有考虑皮肤和样式，所以不要太苛求了，咱只想快点拖拉一个界面出来~~~</li>
</ol><div class="md-section-divider"></div><h2 data-anchor-id="tv5e" id="42-开发环境搭建及软件安装">4.2 开发环境搭建及软件安装</h2><ol data-anchor-id="9nvh">
<li>安装Balsamiq Mockups 3 <br>
mockups官网：<a href="https://balsamiq.com/" target="_blank">https://balsamiq.com/</a>  （英文页面） <br>
<strong>注：也可以在线使用，点击官网的“Start Web App Trial”注册账号就可以用了（没在线用过，估计也是30天时间限制）</strong></li>
<li>搭建PHP开发环境，为了省事推荐直接安装wampserver <br>
wampserver官网：<a href="http://www.wampserver.com/en/" target="_blank">http://www.wampserver.com/en/</a>  （英文页面） <br>
<strong>注：wampserver包括php、apache、mysql、phpmyadmin等，需要用的时候启动服务器即可，不用的时候关闭服务，关闭服务器，资源占用不是太离谱。另外具体怎么用，怎么运行php代码就不多说了，找度娘去~</strong></li>
<li>一个好的文本编辑器 <br>
不要告诉我你的电脑上只有一个记事本，没有高亮，没有简单的语法提示，你让码农怎么活（no zuo no die）。文本编辑器有很多：sublime text2、notepad++、ultraedit、editplus、vim、Emacs等，个人推荐sublime text。</li>
<li>VC + soui <br>
这个就不需要多说了吧 <br>
soui1：<a href="https://github.com/setoutsoft/soui" target="_blank">https://github.com/setoutsoft/soui</a>  (稳定版本) <br>
soui2：<a href="http://code.taobao.org/svn/soui2/trunk" target="_blank">http://code.taobao.org/svn/soui2/trunk</a>     (尝新版本) <br>
soui文档教程：<a href="http://www.cnblogs.com/setoutsoft/" target="_blank">http://www.cnblogs.com/setoutsoft/</a></li>
</ol><div class="md-section-divider"></div><h2 data-anchor-id="kbqu" id="43用mockups绘制界面">4.3、用mockups绘制界面</h2><p data-anchor-id="wq50">怎么画图我想不需要手把手教了吧，虽然没有中文界面，但我认为上手应该没有问题，在众多ui原型设计软件中，mockups能够存活下来并独树一帜，容易上手就是它的一个特色。 <br>
这里要说的是，mockups提供了非常多的ui元素，但soui的控件（包括大神们贡献的控件）也只是其中的一小部分而已，我也没能力全部支持，要是soui发展壮大，大神们将mockups的所有ui元素都扩展实现，那就爽歪歪了。 <br>
目前支持的mockups控件，以及与soui控件的映射关系如下：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="cca9"><ol class="linenums"><li class="L0"><code><span class="kwd">function</span><span class="pln"> mockups_type_to_soui_type</span><span class="pun">(</span><span class="pln">$type</span><span class="pun">)</span></code></li><li class="L1"><code><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">  </span><span class="kwd">static</span><span class="pln"> $soui_type_dicts </span><span class="pun">=</span><span class="pln"> array</span><span class="pun">(</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">'TextInput'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'edit'</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">    </span><span class="str">'Label'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'text'</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">    </span><span class="str">'Button'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'button'</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">    </span><span class="str">'ComboBox'</span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'combobox'</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln">    </span><span class="str">'CheckBox'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'check'</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">    </span><span class="str">'RadioButton'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'radio'</span><span class="pun">,</span></code></li><li class="L9"><code><span class="pln">    </span><span class="str">'Image'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">"img"</span><span class="pun">,</span></code></li><li class="L0"><code><span class="pln">    </span><span class="str">'Canvas'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'window'</span><span class="pun">,</span></code></li><li class="L1"><code><span class="pln">    </span><span class="str">'Link'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'link'</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">'TextArea'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'richedit'</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">'Paragraph'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'richedit'</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">    </span><span class="str">'List'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'listbox'</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">    </span><span class="str">'HSlider'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'sliderbar'</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">    </span><span class="str">'VSlider'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'sliderbar'</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln">    </span><span class="str">'ProgressBar'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'progress'</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">    </span><span class="str">'HRule'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'hr'</span><span class="pun">,</span></code></li><li class="L9"><code><span class="pln">    </span><span class="str">'VRule'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'hr'</span><span class="pun">,</span></code></li><li class="L0"><code><span class="pln">    </span><span class="str">'DataGrid'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'listctrl'</span><span class="pun">,</span></code></li><li class="L1"><code><span class="pln">    </span><span class="str">'TabBar'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'tabctrl'</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">'VerticalTabBar'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'tabctrl'</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">'Tree'</span><span class="pln"> </span><span class="pun">=&gt;</span><span class="pln"> </span><span class="str">'treectrl'</span></code></li><li class="L4"><code><span class="pln">  </span><span class="pun">);</span></code></li><li class="L5"><code><span class="pln">  </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">isset</span><span class="pun">(</span><span class="pln">$soui_type_dicts</span><span class="pun">[</span><span class="pln">$type</span><span class="pun">]))</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L6"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> $soui_type_dicts</span><span class="pun">[</span><span class="pln">$type</span><span class="pun">];</span></code></li><li class="L7"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L8"><code><span class="pln">  </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L9"><code><span class="pln">    </span><span class="kwd">return</span><span class="pln"> </span><span class="str">'unknown'</span><span class="pun">;</span><span class="pln"> </span><span class="com">// 未知控件或暂不支持的控件</span></code></li><li class="L0"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L1"><code><span class="pun">}</span></code></li></ol></pre><p data-anchor-id="h2yg">还有很多的控件目前没有支持，希望各路大神发挥开源精神，做2件事之一即可：</p><ol data-anchor-id="hh4n">
<li>扩展soui，实现mockups中的ui元素</li>
<li>修改本文的php代码，支持还没有实现的soui控件，比如标题栏caption、分组group，window，分割窗口(splitwnd、splitpane）、日历calenda等</li>
</ol><div class="md-section-divider"></div><h2 data-anchor-id="m9sp" id="44-mockups导出json数据">4.4 mockups导出json数据</h2><div class="md-section-divider"></div><h3 data-anchor-id="gup6" id="441-如何导出">4.4.1 如何导出？</h3><p data-anchor-id="1pm3">按快捷键ctrl+e即可，mockups会提示你已经保存到系统剪贴板里 <br>
（1）鼠标选择一个ui元素，按ctrl+e，提示你已经保存到系统的剪贴板，粘贴到一二 <br>
（2）鼠标框选多个ui元素，按ctrl+e <br>
（3）按ctrl+a全选，再按ctrl+e <br>
<img src="http://i1.tietuku.com/1122002753882949.png"></p><div class="md-section-divider"></div><h3 data-anchor-id="clcv" id="442-如何保存">4.4.2 如何保存？</h3><p data-anchor-id="9tc4">粘贴到文件里保存即可，但该文件必须是<strong>utf8</strong>格式（不能是ANSI格式，不能是GBK、GB2312，也不能是unicode，也不能是utf8-bom格式） <br>
注1：千万不要用记事本自带的另存为utf8格式，它最终保存的实质是<strong><em>utf8-bom</em></strong>，坑死你不偿命!!! <br>
注2：推荐用sublime text、notepad++编辑，它们都内置编码转换功能或者有插件可以将文件进行编码转换，非常方便 <br>
注3：sublime text新建文件默认是utf8格式，如果在windows下使用，建议安装package control、ConvertToUTF8、GBK Encoding这3个插件扩展，要不然gbk格式中文文件打开会乱码</p><div class="md-section-divider"></div><h3 data-anchor-id="rupn" id="443-有没有查看json数据更直观的方法">4.4.3 有没有查看json数据更直观的方法？</h3><p data-anchor-id="vwne">当然有，网上有很多的json在线编辑器，都非常的不错，这里给一个我自己在用的：<a href="http://www.qqe2.com/" target="_blank">http://www.qqe2.com/</a> （非广告，选择自己喜欢的就行） <br>
注1：json数据可以显示成一行，也可以显示成树状结构（前提是没有错误） <br>
注2：保存到文件的json数据最好是一行，树状结构虽然美观，但php解析起来有时候会有点问题 <br>
<strong>==&gt;json数据在一行</strong> <br>
<img src="http://i3.tietuku.com/3c20d994e87fa59e.png"> <br>
<strong>==&gt;json数据树状结构</strong> <br>
<img src="http://i3.tietuku.com/cf2872f2a16e60e4.png"></p><div class="md-section-divider"></div><h3 data-anchor-id="ox40" id="444-mockups导出的json数据格式说明">4.4.4 mockups导出的json数据格式说明</h3><p data-anchor-id="27lo">mockups最具特色的2个功能： <br>
1. 手绘风格，使用简单（这个是官方也是网上很多做ui设计的人们口口相传的，咱也认同）； <br>
2. 可以导出json数据（官方貌似没有特意宣传这个特色，但我非常的喜欢，真心不错）</p><p data-anchor-id="0bl2">从开发的角度来说，市面上的其它UI原型设计软件大多都只提供<strong>html</strong>格式的导出功能。为什么呢？因为按照它们的定位，UI原型还只是一个<strong>草稿</strong>，不是正式的产品界面。说白了就是，这个东西画出来就是给你们看的（程序员和用户），把它当成图片看看就拉倒，具体程序上怎么绘制UI用这个<strong>草稿</strong>作为参考就行了。 <br>
但是html的解析太复杂，里面涉及到css、javascript等等，难度不是一般的大。相反，mockups导出的json包含了我所关注的UI元素基本信息(简洁就是美嘛)： <br>
1. 控件的位置（x、y）和大小（宽度、高度） <br>
2. 控件的类型 <br>
3. 控件的文本内容 <br>
4. 控件的基本属性（颜色、字体、对齐方式等）</p><p data-anchor-id="m5bb">例如，这是一个mockups绘制的简单按钮导出来的json数据 <br>
<img src="http://i1.tietuku.com/076111b8e0d72448.png"> <br>
<strong>注1：mockups可以导出你选择的ui元素，也可以导出全部</strong> <br>
<strong>注2：一眼看过去会感觉乱，但习惯json的语法之后，你会被它的简洁语法和强大表示能力折服的</strong></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="jxr7"><ol class="linenums"><li class="L0"><code><span class="pun">{</span></code></li><li class="L1"><code><span class="pln">  </span><span class="str">"mockup"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">"controls"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L3"><code><span class="pln">      </span><span class="str">"control"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">[</span></code></li><li class="L4"><code><span class="pln">        </span><span class="pun">{</span></code></li><li class="L5"><code><span class="pln">          </span><span class="str">"ID"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"0"</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">          </span><span class="str">"h"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"70"</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln">          </span><span class="str">"measuredH"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"27"</span><span class="pun">,</span></code></li><li class="L8"><code><span class="pln">          </span><span class="str">"measuredW"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"58"</span><span class="pun">,</span></code></li><li class="L9"><code><span class="pln">          </span><span class="str">"properties"</span><span class="pun">:</span><span class="pln"> </span><span class="pun">{</span></code></li><li class="L0"><code><span class="pln">            </span><span class="str">"size"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"18"</span><span class="pun">,</span></code></li><li class="L1"><code><span class="pln">            </span><span class="str">"text"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"你好"</span></code></li><li class="L2"><code><span class="pln">          </span><span class="pun">},</span></code></li><li class="L3"><code><span class="pln">          </span><span class="str">"typeID"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"Button"</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">          </span><span class="str">"w"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"158"</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">          </span><span class="str">"x"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"182"</span><span class="pun">,</span></code></li><li class="L6"><code><span class="pln">          </span><span class="str">"y"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"122"</span><span class="pun">,</span></code></li><li class="L7"><code><span class="pln">          </span><span class="str">"zOrder"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"0"</span></code></li><li class="L8"><code><span class="pln">        </span><span class="pun">}</span></code></li><li class="L9"><code><span class="pln">      </span><span class="pun">]</span></code></li><li class="L0"><code><span class="pln">    </span><span class="pun">},</span></code></li><li class="L1"><code><span class="pln">    </span><span class="str">"measuredH"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"192"</span><span class="pun">,</span></code></li><li class="L2"><code><span class="pln">    </span><span class="str">"measuredW"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"340"</span><span class="pun">,</span></code></li><li class="L3"><code><span class="pln">    </span><span class="str">"mockupH"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"70"</span><span class="pun">,</span></code></li><li class="L4"><code><span class="pln">    </span><span class="str">"mockupW"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"158"</span><span class="pun">,</span></code></li><li class="L5"><code><span class="pln">    </span><span class="str">"version"</span><span class="pun">:</span><span class="pln"> </span><span class="str">"1.0"</span></code></li><li class="L6"><code><span class="pln">  </span><span class="pun">}</span></code></li><li class="L7"><code><span class="pun">}</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="frk8" id="45-运行php代码生成soui的xml文件">4.5 运行php代码生成soui的xml文件</h2><div class="md-section-divider"></div><h3 data-anchor-id="ajyh" id="451-启动wampserver启动服务">4.5.1 启动wampserver，启动服务</h3><p data-anchor-id="ve7r"><strong>服务有哪些？</strong> <br>
php解释器、apache服务器、mysql服务器等 <br>
<strong>wampserver语言设置？</strong> <br>
右键单击任务栏图标--&gt;language--&gt;chinese即可 <br>
<strong>如何启动或关闭服务？</strong> <br>
左键单击任务栏图标--&gt;启动或关闭所有服务 <br>
<img src="http://i1.tietuku.com/24c98847fafb2df8.png"></p><div class="md-section-divider"></div><h3 data-anchor-id="r6ju" id="452-根据需要修改php代码">4.5.2 根据需要修改php代码</h3><p data-anchor-id="mvht">用文本编辑器打开soui.php,修改最后一行代码，指定json文件名和要生成的xml文件名</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="gn2x"><ol class="linenums"><li class="L0"><code><span class="com">//读取mockups导出的json数据,生成soui需要的xml文件</span></code></li><li class="L1"><code><span class="pln">mockups_to_soui_xml</span><span class="pun">(</span><span class="str">'login.json'</span><span class="pun">,</span><span class="pln"> </span><span class="str">'login.xml'</span><span class="pun">);</span></code></li></ol></pre><p data-anchor-id="ptjd">注1：这个php文件是<strong>utf8</strong>编码的，所以如果浏览器运行有乱码，请设置浏览器的编码为UTF8 <br>
注2：我为了省事，把php代码直接放在wampserver的www目录下 <br>
注3：同样的，json文件也放在www目录下，各位按照自己的意愿修改路径即可 <br>
注4：php代码写的比较乱，我也是现学现卖的，有php大神愿意给重构下更好，热烈欢迎（改完后记得给同志们回馈下啊） <br>
<img src="http://i1.tietuku.com/24c98847fafb2df8.png"></p><div class="md-section-divider"></div><h3 data-anchor-id="h3tb" id="453-打开浏览器运行php代码">4.5.3 打开浏览器运行php代码</h3><p data-anchor-id="nokp">浏览器地址栏输入：<a href="http://localhost/soui.php" target="_blank">localhost/soui.php</a>，然后回车。运行完毕之后，会在www目录下生成我们需要的xml文件 <br>
<strong>注：这个xml文件没有使用soui的样式class、没有皮肤skin，控件都是绝对定位(pos、width、height）</strong></p><p data-anchor-id="powk">下面是生成的xml片段，比较ugly</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="5kaq"><ol class="linenums"><li class="L0"><code><span class="pun">&lt;?</span><span class="pln">xml version</span><span class="pun">=</span><span class="str">"1.0"</span><span class="pln"> encoding</span><span class="pun">=</span><span class="str">"UTF-8"</span><span class="pun">?&gt;</span></code></li><li class="L1"><code><span class="tag">&lt;SOUI</span><span class="pln"> </span><span class="atn">width</span><span class="pun">=</span><span class="atv">"905"</span><span class="pln"> </span><span class="atn">height</span><span class="pun">=</span><span class="atv">"589"</span><span class="pln"> </span><span class="atn">translucent</span><span class="pun">=</span><span class="atv">"0"</span><span class="pln"> </span><span class="atn">alpha</span><span class="pun">=</span><span class="atv">"255"</span><span class="pln"> </span><span class="atn">resizable</span><span class="pun">=</span><span class="atv">"0"</span><span class="tag">&gt;</span></code></li><li class="L2"><code><span class="pln">  </span><span class="tag">&lt;root</span><span class="pln"> </span><span class="atn">cache</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">skin</span><span class="pun">=</span><span class="atv">"_skin.sys.wnd.bkgnd"</span><span class="tag">&gt;</span></code></li><li class="L3"><code><span class="pln">    </span><span class="tag">&lt;text</span><span class="pln"> </span><span class="atn">pos</span><span class="pun">=</span><span class="atv">"60,40"</span><span class="pln"> </span><span class="atn">width</span><span class="pun">=</span><span class="atv">"49"</span><span class="pln"> </span><span class="atn">height</span><span class="pun">=</span><span class="atv">"21"</span><span class="pln"> </span><span class="atn">enable</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">font</span><span class="pun">=</span><span class="atv">"face:宋体"</span><span class="pln"> </span><span class="atn">ncSkin</span><span class="pun">=</span><span class="atv">"_skin.sys.border"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"Label7"</span><span class="pln"> </span><span class="atn">margin-x</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">margin-y</span><span class="pun">=</span><span class="atv">"1"</span><span class="tag">&gt;</span><span class="pln">用户名</span><span class="tag">&lt;/text&gt;</span></code></li><li class="L4"><code><span class="pln">    </span><span class="tag">&lt;edit</span><span class="pln"> </span><span class="atn">pos</span><span class="pun">=</span><span class="atv">"118,37"</span><span class="pln"> </span><span class="atn">width</span><span class="pun">=</span><span class="atv">"204"</span><span class="pln"> </span><span class="atn">height</span><span class="pun">=</span><span class="atv">"27"</span><span class="pln"> </span><span class="atn">enable</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">font</span><span class="pun">=</span><span class="atv">"face:宋体"</span><span class="pln"> </span><span class="atn">ncSkin</span><span class="pun">=</span><span class="atv">"_skin.sys.border"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"edit_user"</span><span class="pln"> </span><span class="atn">test</span><span class="pun">=</span><span class="atv">"中文测试"</span><span class="pln"> </span><span class="atn">margin-x</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">margin-y</span><span class="pun">=</span><span class="atv">"1"</span><span class="tag">/&gt;</span></code></li><li class="L5"><code><span class="pln">    </span><span class="tag">&lt;text</span><span class="pln"> </span><span class="atn">pos</span><span class="pun">=</span><span class="atv">"60,82"</span><span class="pln"> </span><span class="atn">width</span><span class="pun">=</span><span class="atv">"49"</span><span class="pln"> </span><span class="atn">height</span><span class="pun">=</span><span class="atv">"21"</span><span class="pln"> </span><span class="atn">enable</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">font</span><span class="pun">=</span><span class="atv">"face:宋体"</span><span class="pln"> </span><span class="atn">ncSkin</span><span class="pun">=</span><span class="atv">"_skin.sys.border"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"Label10"</span><span class="pln"> </span><span class="atn">margin-x</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">margin-y</span><span class="pun">=</span><span class="atv">"1"</span><span class="tag">&gt;</span><span class="pln">密码</span><span class="tag">&lt;/text&gt;</span></code></li><li class="L6"><code><span class="pln">    </span><span class="tag">&lt;edit</span><span class="pln"> </span><span class="atn">pos</span><span class="pun">=</span><span class="atv">"118,82"</span><span class="pln"> </span><span class="atn">width</span><span class="pun">=</span><span class="atv">"204"</span><span class="pln"> </span><span class="atn">height</span><span class="pun">=</span><span class="atv">"27"</span><span class="pln"> </span><span class="atn">enable</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">font</span><span class="pun">=</span><span class="atv">"face:宋体"</span><span class="pln"> </span><span class="atn">ncSkin</span><span class="pun">=</span><span class="atv">"_skin.sys.border"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"TextInput11"</span><span class="pln"> </span><span class="atn">margin-x</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">margin-y</span><span class="pun">=</span><span class="atv">"1"</span><span class="tag">/&gt;</span></code></li><li class="L7"><code><span class="pln">    </span><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">pos</span><span class="pun">=</span><span class="atv">"40,127"</span><span class="pln"> </span><span class="atn">width</span><span class="pun">=</span><span class="atv">"124"</span><span class="pln"> </span><span class="atn">height</span><span class="pun">=</span><span class="atv">"55"</span><span class="pln"> </span><span class="atn">enable</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">font</span><span class="pun">=</span><span class="atv">"face:宋体"</span><span class="pln"> </span><span class="atn">ncSkin</span><span class="pun">=</span><span class="atv">"_skin.sys.border"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"Button12"</span><span class="pln"> </span><span class="atn">margin-x</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">margin-y</span><span class="pun">=</span><span class="atv">"1"</span><span class="tag">&gt;</span><span class="pln">'有引号的汉字'</span><span class="tag">&lt;/button&gt;</span></code></li><li class="L8"><code><span class="pln">    </span><span class="tag">&lt;button</span><span class="pln"> </span><span class="atn">pos</span><span class="pun">=</span><span class="atv">"180,133"</span><span class="pln"> </span><span class="atn">width</span><span class="pun">=</span><span class="atv">"115"</span><span class="pln"> </span><span class="atn">height</span><span class="pun">=</span><span class="atv">"30"</span><span class="pln"> </span><span class="atn">enable</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">font</span><span class="pun">=</span><span class="atv">"face:宋体"</span><span class="pln"> </span><span class="atn">ncSkin</span><span class="pun">=</span><span class="atv">"_skin.sys.border"</span><span class="pln"> </span><span class="atn">name</span><span class="pun">=</span><span class="atv">"Button13"</span><span class="pln"> </span><span class="atn">margin-x</span><span class="pun">=</span><span class="atv">"1"</span><span class="pln"> </span><span class="atn">margin-y</span><span class="pun">=</span><span class="atv">"1"</span><span class="tag">&gt;</span><span class="pln">注册</span><span class="tag">&lt;/button&gt;</span></code></li><li class="L9"><code><span class="pln">  </span><span class="tag">&lt;/root&gt;</span></code></li><li class="L0"><code><span class="tag">&lt;/SOUI&gt;</span></code></li></ol></pre><div class="md-section-divider"></div><h2 data-anchor-id="jtqc" id="46-测试xml文件">4.6 测试xml文件</h2><p data-anchor-id="6ik0">大家自行发挥吧，把xml文件注册到soui的uires.idx即可</p><div class="md-section-divider"></div><h1 data-anchor-id="6kb1" id="五-自定义属性">五 自定义属性</h1><div class="md-section-divider"></div><h2 data-anchor-id="m31t" id="51-问题">5.1 问题</h2><p data-anchor-id="augp">可能有的童鞋就说了，mockups控件自带的信息太少了。嗯，这是事实，我不否认，那么还有缺少哪些信息呢？</p><ol data-anchor-id="w752">
<li>mockups的控件只有id号，没有name <br>
<strong>注：soui推荐使用name，而不是id，id容易冲突，查找效率也不高</strong></li>
<li>组合框(combobox)无法指定下拉内容 <br>
<img src="http://i3.tietuku.com/e64af9633dce4e96.png"> <br>
<img src="http://i3.tietuku.com/b21bcf62a3b3ed2c.png"></li>
<li>mockups的树型控件(Tree)无法指定子节点数据 <br>
mockups的Tree内置数据对soui来说无甚大用，难以解析 <br>
<img src="http://i3.tietuku.com/838c1b9df719e8f7.png"></li>
<li>其它更多 <br>
想到了再加，嘿嘿~~</li>
</ol><div class="md-section-divider"></div><h2 data-anchor-id="sg32" id="52-解决办法">5.2 解决办法</h2><p data-anchor-id="kd3k">解决办法有么有，当然有！！！mockups提供了叫做<strong>“custom properties”</strong>功能，可以通过字符串的形式给控件指定额外的属性（真是业界良心啊!!!）</p><p data-anchor-id="zzz1">mockups中右键点击ui元素，弹出菜单，选择“custom properties” <br>
<img src="http://i3.tietuku.com/d554638169fa5a92.png"> <br>
然后会弹出一个对话框，指定自定义属性，可以是任意数据，内部是以字符串的形式保存，这就给了我们无限扩展的能力。 <br>
<img src="http://i3.tietuku.com/c10094f79df64653.png"> <br>
<em>注：<strong>custom control ID</strong>这一项无所谓，随便填个名字即可，我的php代码忽略该ID，重点关注的是<strong>custom control data</strong>的内容</em></p><p data-anchor-id="yv5c">那么，<strong>custom control data</strong>的该填什么内容呢？这里我仍然使用强大的json，传递一个json字符串进去（json就相当于一个大词典，可以放任何数据） <br>
<strong><em>注：不会json？看着头晕？那你也太out了，赶紧充电去吧~</em></strong></p><div class="md-section-divider"></div><h1 data-anchor-id="mmkx" id="六-其它问题">六 其它问题</h1><p data-anchor-id="5e4w">有的童鞋可能就说了，你只考虑简单的<strong>非容器类控件</strong>，那容器类控件（比如treectrl、window、splitpanel等）呢？</p><div class="md-section-divider"></div><h3 data-anchor-id="kgif" id="1-soui容器类控件目前实现了3个">1. soui容器类控件目前实现了3个</h3><p data-anchor-id="jpcb">（1）tabctrl是用mockups的TabBar转换得到的，生成的xml文件&lt;tabctrl&gt;标签也包含了&lt;page&gt;子标签，但里面没有具体内容；&lt;page&gt;的标题通过英文逗号分隔</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="yf4x"><ol class="linenums"><li class="L0"><code><span class="pun">杀毒,</span><span class="pln"> </span><span class="pun">体检,</span><span class="pln"> </span><span class="pun">更新,</span><span class="pln"> </span><span class="typ">Four</span></code></li></ol></pre><p data-anchor-id="5o4a">（2）listctrl是用mockups的DataGrid转换得到的，listctrl的标题栏通过DataGrid文本值的第一行解析得到（这个文本值字符串用英文的逗号分隔） <br>
<strong>注：soui的listctrl不支持在xml里定义数据，所以第2行之后的数据都会被忽略</strong></p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="brrm"><ol class="linenums"><li class="L0"><code><span class="pun">名称,学号,性别,成绩</span></code></li><li class="L1"><code><span class="pun">张三,</span><span class="lit">01</span><span class="pun">,男,</span><span class="lit">80.7</span></code></li><li class="L2"><code><span class="pun">李四,</span><span class="lit">02</span><span class="pun">,男,</span><span class="lit">88.7</span></code></li></ol></pre><p data-anchor-id="n0ig">（3）listbox是用mockups的List转换得到的，listbox里的item通过List的文本值转换得到（文本值字符串用换行分隔）</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="h521"><ol class="linenums"><li class="L0"><code><span class="typ">Item</span><span class="pln"> </span><span class="typ">One</span></code></li><li class="L1"><code><span class="typ">Item</span><span class="pln"> </span><span class="typ">Two</span></code></li><li class="L2"><code><span class="typ">Item</span><span class="pln"> </span><span class="typ">Three</span></code></li></ol></pre><div class="md-section-divider"></div><h3 data-anchor-id="eih3" id="2-windowgroupsplitpanel这类容器控件怎么处理">2. &lt;window&gt;、&lt;group&gt;、&lt;splitpanel&gt;这类容器控件怎么处理？</h3><p data-anchor-id="nc5u">其实变通的方法很简单：</p><div class="md-section-divider"></div><pre class="prettyprint linenums prettyprinted" data-anchor-id="c4kx"><ol class="linenums"><li class="L0"><code><span class="pun">新建一个</span><span class="pln">mockups</span><span class="pun">项目，然后把生成的</span><span class="pln">xml</span><span class="pun">文件简单编辑处理下，用</span><span class="pln">soui</span><span class="pun">的&lt;</span><span class="pln">include</span><span class="pun">&gt;标签括起来不就完事了嘛~~~</span></code></li></ol></pre><p data-anchor-id="zw56">后续如果可能的话，我的php代码能够直接支持子窗口那就更美好了，当然了，大神们要给力啊~~~</p><div class="md-section-divider"></div><h1 data-anchor-id="5sou" id="七-下一步的改进方向">七 下一步的改进方向</h1><p data-anchor-id="8y5c">首先，希望各路大神都能参与进来，携手把soui做好做精，<em>不能仅仅停留在自己用用就行了的阶段</em>~</p><ol data-anchor-id="7cdz">
<li>完善更多的mockups控件向soui控件的转化</li>
<li>支持在mockups中指定更多的数据（比如样式、皮肤等）</li>
<li>重构php代码，希望代码能更规范、更模块化，这样大神们参与进来更方便</li>
<li>生成的xml文件不适合人类阅读和修改，下一步想将一些通用的属性提取成soui的样式class和皮肤skin</li>
</ol><p data-anchor-id="0ajh">最后欢迎拍砖，轻点哈，写代码写文档不容易啊（前期考察UI设计器时间N天，构思和写php代码2天，markdown写文档1天）~~</p></div>
</body>
</html>